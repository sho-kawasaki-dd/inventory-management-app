{% extends "layout.html" %}
{% block content %}
<h1>商品</h1>
<form id="new-item-form">
  <input type="text" name="sku" placeholder="SKU（任意）" />
  <input type="text" name="name" placeholder="名前" required />
  <input type="text" name="unit" placeholder="単位" value="個" />
  <input type="text" name="category" placeholder="種目（任意）" />
  <input type="text" name="usage" placeholder="用途（任意）" />
  <input type="text" name="manufacturer" placeholder="メーカー（任意）" />
  <button class="btn primary" type="submit">追加</button>
</form>

<h2>一覧</h2>
<table id="items-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>SKU</th>
      <th>名前</th>
      <th>種目</th>
      <th>用途</th>
      <th>メーカー</th>
      <th>単位</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
{% endblock %}
{% block scripts %}
<script>
  window.InventoryApp.loadItems();
  document.getElementById('new-item-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const fd = new FormData(e.target);
    const payload = {
      sku: fd.get('sku') || null,
      name: fd.get('name'),
      unit: fd.get('unit') || 'pcs',
      category: fd.get('category') || null,
      usage: fd.get('usage') || null,
      manufacturer: fd.get('manufacturer') || null
    };
    await window.InventoryApp.api('/api/items', { method: 'POST', body: JSON.stringify(payload) });
    e.target.reset();
    window.InventoryApp.loadItems();
  });
</script>
{% endblock %}
